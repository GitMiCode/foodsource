<html>
  <head>
    <title>FoodSources</title>
    <meta charset="utf-8">
    <link rel="icon" type="image/x-icon" href="./favicon.png">
    <link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" />
    <script defer src="https://pyscript.net/alpha/pyscript.js"></script>
    <py-env>
      - pandas
      - matplotlib
      - seaborn
      - paths:
          - data/Indices_of_farm_output.csv
          - data/cpifoodt.csv
    </py-env>
    </head>
    <!-- <body style="background-color:#FFFFF0; margin-left: 2%;"> -->
      <body style="margin-left: 2%;"></body>
      <h1 style="text-align:center; font-size:250%; color:blue; "><b>Where's the BEEF?</b></h1>
      <h1 style="text-align:center; font-size:150%; color:blue;"><b>And other foods.</b></h1>
      <br>
      <p style="text-align:center; color:blue; ">While the latest USDA-ERS shows the Indices of total farm output, data from 1948 - 2019 on a steady climb, <br>
         we still have food shortages and climbing food prices. </p>
      <br>
      <img src="/images/usda_ers.png" alt="USDA-ERS" width="423" height="72">
      <a href="https://www.ers.usda.gov/">       ( USDA-ERS Home )</a>
      <br>
      <br>
      <h3 style="color:#708090; "><b>Matplotlib Plot</b></h3>
      <div id="mpl"></div>
      <py-script output="mpl">
        import pandas as pd
        import matplotlib.pyplot as plt
        import seaborn as sns
        
        fig1, ax1 = plt.subplots(figsize = (5,3))

        # Get Indices of total farm output, data from 1948 - 2019
        df = pd.read_csv('Indices_of_farm_output.csv')
        #print(df[(df['Attribute'] == 'Total agricultural output')])
        
        total_Agri_Out = df[(df['Attribute'] == 'Total agricultural output')]

        ax1.plot(total_Agri_Out['Year'], total_Agri_Out['Value'])
        plt.xlabel('Yearly change', size=12)
        plt.ylabel('Farm output value', size=12)
        plt.title('Yearly Farm Output from 1948 - 2019', size=14)
        
        fig1
      </py-script>
      <br>
      <h1 style="font-size:150%; color:blue;"><u><b>Food shortages & Price increase</b></u></h1>
    
      <p>
        Global food prices started to rise in mid-2020 when businesses shut down due to the COVID-19 pandemic, 
        straining supply chains. Farmers dumped out milk and let fruits and vegetables rot due to a lack of available truckers to transport goods to supermarkets, 
        where prices spiked as consumers stockpiled food. A shortage of migrant labor as lockdowns restricted movement impacted crops worldwide.
        The latest food index from the Bureau of Labor Statistics climbed 10.1 percent for the 12 months ending in May, the first increase of over 10 percent since 1981.
        Climate change , the war with Russia's invasion of Ukraine.  China, Brazil are also top crop exports have had severe issues.
      </p>
      <br>
      <h3 style="color:#708090;"><b>SNS Plot</b></h3>
      <div id="sns"></div>
      <py-script output="sns">
        
        import pandas as pd
        import matplotlib.pyplot as plt
        from matplotlib.pyplot import figure
        import seaborn as sns        

        dfood = pd.read_csv('cpifoodt.csv')
        print('\n')
        dfood = dfood.drop(columns=['Top-level', 'Aggregate', 'Low-level','Disaggregate', 'Adjustment relative to last month'])
        attributeRowDropList = ['Relative importance', 'Month-to-month April 2022 to May 2022','Year-over-year May 2021 to May 2022', 'Year-to-date avg. 2021 to avg. 2022',
                    '20-year historical average', 'Lower bound of forecast range 2022', 'Upper bound of forecast range 2022']
        dfood = dfood[~dfood['Attribute'].isin(attributeRowDropList)]
        dfood = dfood.dropna(subset=['Mid-level'])
        dfood = dfood.reset_index(drop=True)

        print('\n')
        fig1, ax1 = plt.subplots(figsize = (5,3))
        
        ax1 = sns.scatterplot(x=dfood['Value'],y=dfood['Mid-level'], hue=dfood['Attribute'])
        plt.xlabel('Price percentage changed', size=16)
        plt.ylabel('Food catagories', size=16)
        plt.title('Price Index on Food 2019 - 2021', size=20)
        ax1.grid()
        fig1

    </py-script>
    <br>
    <br>
    </body>
</html>